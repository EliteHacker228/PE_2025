# Обработка файлов: распознование таблиц и угла наклона

## Описание

Этот фронтенд — веб-интерфейс для взаимодействия с backend-сервисом на FastAPI, использующим модель машинного обучения для распознавания таблиц и поворота угла изображения. Основной эндпоинт API — `POST /detect-rotate`, на который отправляется изображение, и в ответ возвращается обработанный файл.

## Стек

* **Vite** — сборщик проекта
* **React 19 + TypeScript** — UI
* **CSS** — стилизация
* **Vitest + Testing Library** — модульные тесты

## Сценарий использования

1. Пользователь запускает интерфейс и видит заголовок.
2. Нажимает кнопку "Выбрать файл", чтобы выбрать изображение (например, с таблицей).
3. После выбора появляется кнопка "Обработать" и "Выбрать другой файл".
4. После нажатия "Обработать" начинается загрузка и отправка изображения на сервер.
5. После завершения обработки отображается кнопка для скачивания готового файла.
6. В любой момент пользователь может сбросить и выбрать другой файл.

## Структура проекта

```
src/
├── App.css                 // Стили основного компонента App
├── App.tsx                 // Основной компонент приложения
├── App.test.tsx            // Тесты для App.tsx
├── assets/
│   └── react.svg
├── components/             // Переиспользуемые компоненты
│   ├── DownloadReady.tsx          // Компонент кнопки скачивания
│   ├── DownloadReady.test.tsx     // Тесты для DownloadReady
│   ├── FilePicker.tsx             // Компонент выбора файла
│   ├── FilePicker.test.tsx        // Тесты для FilePicker
│   ├── ProcessingIndicator.tsx    // Компонент индикатора обработки
│   ├── ProcessingIndicator.test.tsx
│   └── ProcessingIndicator.css    // Стили для индикатора обработки
├── index.css
├── main.tsx               // Точка входа
├── setupTests.ts          // Конфигурация Vitest
└── vite-env.d.ts
```

## Описание компонентов

### `App.tsx`

Главный компонент, управляющий состоянием и взаимодействием с API. Подключает и координирует все остальные компоненты:

* `FilePicker` — отображается, когда файл не выбран
* `ProcessingIndicator` — отображается во время обработки
* `DownloadReady` — отображается после успешной обработки файла

### `FilePicker.tsx`

Компонент для выбора файла. Скрытый `<input type="file">` вызывается кнопкой "Выбрать файл". После выбора вызывает `onFileSelect(file)`.

### `ProcessingIndicator.tsx`

Простой индикатор загрузки (анимация и надпись "Идёт обработка файла..."). Используется при `isProcessing = true`.

### `DownloadReady.tsx`

Отображает сообщение "Файл готов!" и кнопку для скачивания обработанного файла. Принимает `downloadUrl` и `filename`.

## Скрипты

```bash
npm install       # Установка
npm run dev       # Запустить локальный dev-сервер
npm run build     # Собрать production-версию
npm run preview   # Предпросмотр production-сборки
npm run test      # Запустить тесты (Vitest)
```

## Тесты

Покрытие тестами реализовано для всех компонентов с использованием:

* `@testing-library/react`
* `vitest`

Примеры тестов включают:

* Проверка отображения текста и кнопок
* Загрузка файла
* Обработка файла и получение результата

## API-интеграция

Файл отправляется POST-запросом на:

```
POST http://localhost:8000/detect-rotate/
```

Тело запроса — `multipart/form-data` с полем `file`. Ответ — `Blob`, преобразуемый в URL для скачивания.

---

Если необходимо дополнить документацию секцией про деплой, CI/CD или использование FastAPI — дай знать.
